<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>头部导航栏布局</title>
    <link rel="stylesheet" href="./css/reset.css" />
    <link rel="stylesheet" href="./css/index.css" />
  </head>

  <body>
    <div class="outer">
      <!-- 侧边栏 -->
      <div class="toolBar">
        <!-- 侧边栏的内容 -->
        <div class="content"></div>
        <!-- 面包屑 -->
        <div class="menu"></div>
        <!-- 中间导航区域 -->
        <ul class="navList">
          <li>
            <i></i>
            <p>商品会员</p>
          </li>
          <li>
            <i></i>
            <p>购物车</p>
          </li>
          <li>
            <i></i>
            <p>我的关注</p>
          </li>
          <li>
            <i></i>
            <p>我的足迹</p>
          </li>
          <li>
            <i></i>
            <p>我的消息</p>
          </li>
          <li>
            <i></i>
            <p>红浪漫来了</p>
          </li>
        </ul>
        <!-- 回到顶部 -->
        <div class="back"></div>
      </div>
      <!-- 头部区域 -->
      <header class="header">
        <div class="headerTop_out">
          <div class="headerTop">
            <div class="headerTop_left">
              <p>尚品汇欢迎您</p>
              <p>
                请
                <a href="javascript:;">登录</a>
                <a href="javascript:;">免费注册</a>
              </p>
            </div>
            <div class="headerTop_right">
              <a href="javascript:;">我的订单</a>
              <a href="javascript:;">我的购物车</a>
              <a href="javascript:;">我的尚品汇</a>
              <a href="javascript:;">尚品汇会员</a>
              <a href="javascript:;">企业采购</a>
              <a href="javascript:;">关注尚品汇</a>
              <a href="javascript:;">合作招聘</a>
              <a href="javascript:;">商家后台</a>
            </div>
          </div>
        </div>
        <div class="headerBottom">
          <h1 class="logo">
            <a href="javascript:;">
              <img src="./images/Logo.png" alt="" />
            </a>
          </h1>
          <div class="header_search">
            <input type="text" />
            <button>搜索</button>
          </div>
        </div>
      </header>
      <div class="allnav_outer">
        <div class="allnav">
          <h2>所有商品分类</h2>
          <nav>
            <a href="javascript:;">服装城</a>
            <a href="javascript:;">美妆馆</a>
            <a href="javascript:;">尚品汇超市</a>
            <a href="javascript:;">全球购</a>
            <a href="javascript:;">闪购</a>
            <a href="javascript:;">团购</a>
            <a href="javascript:;">有趣</a>
            <a href="javascript:;">秒杀</a>
          </nav>
        </div>
      </div>
      <section class="con">
        <div class="conPoint">
          <a href="javascript:;">手机、数码、通讯手机</a>
          <a href="javascript:;">Apple苹果</a>
          <a>iphone 6S系类</a>
        </div>
        <div class="mainCon">
          <div class="previewArea">
            <div class="preview">
              <!-- 小图区域 -->
              <div class="smallArea">
                <img src="./images/s1.png" alt="" />
                <!-- 蒙版区域 -->
                <div class="mask"></div>
              </div>
              <!-- 大图区域 -->
              <div class="bigArea">
                <img src="./images/b1.png" alt="" />
              </div>
            </div>
            <div class="prescroll">
              <p class="left">&lt;</p>
              <div class="listOut">
                <ul class="list">
                  <!-- <li><img src="./images/s1.png" alt="" /></li>
                  <li><img src="./images/s2.png" alt="" /></li>
                  <li><img src="./images/s3.png" alt="" /></li>
                  <li><img src="./images/s1.png" alt="" /></li>
                  <li><img src="./images/s2.png" alt="" /></li>
                  <li><img src="./images/s3.png" alt="" /></li>
                  <li><img src="./images/s1.png" alt="" /></li>
                  <li><img src="./images/s2.png" alt="" /></li>
                  <li><img src="./images/s3.png" alt="" /></li>
                  <li><img src="./images/s1.png" alt="" /></li>
                  <li><img src="./images/s2.png" alt="" /></li>
                  <li><img src="./images/s3.png" alt="" /></li> -->
                </ul>
              </div>
              <p class="right">&gt;</p>
            </div>
          </div>
          <div class="detailArea">
            <div class="priceArea">
              <!-- <h3 class="title">Apple iPhone 6s（A1700）64G玫瑰金色 移动通信电信4G手机</h3>
              <p class="con1">推荐选择下方[移动优惠购],手机套餐齐搞定,不用换号,每月还有花费返</p>
              <div class="price">
                <div class="priceDetail">
                  <p>价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</p>
                  <p>￥ <span>5299</span> 元</p>
                </div>
                <div class="buy">
                  <p>促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</p>
                  <p><span>加价购</span>满999.00另加20.00元，或满1999.00另加30.00元，或满2999.00另加40.00元，即可在购物车换购热销商品</p>
                </div>
              </div>
              <div class="support">
                <div class="supportDetail">
                  <p>支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</p>
                  <p>以旧换新，闲置手机回收 4G套餐超值抢 礼品购</p>
                </div>
                <div class="address">
                  <p>配&nbsp;送&nbsp;至</p>
                  <p>广东省 深圳市 宝安区</p>
                </div>
              </div> -->
            </div>
            <div class="chooseInsert"></div>
            <div class="chooseArea">
              <!-- <dl>
                <dt>选择颜色</dt>
                <dd>金色</dd>
                <dd>银色</dd>
                <dd>黑色</dd>
              </dl>
              <dl>
                <dt>内存容量</dt>
                <dd>16G</dd>
                <dd>32G</dd>
                <dd>64G</dd>
                <dd>128G</dd>
              </dl>
              <dl>
                <dt>选择版本</dt>
                <dd>公开版</dd>
                <dd>移动版</dd>
              </dl>
              <dl>
                <dt>选择优惠</dt>
                <dd>官方标配</dd>
                <dd>移动优惠版</dd>
                <dd>电信优惠版</dd>
              </dl> -->
            </div>
            <div class="goodsNum">
              <div class="num">
                <input type="text" value="1" readonly />
                <button class="plus">+</button>
                <button class="mins">-</button>
              </div>
              <div class="addCart">加入购物车</div>
            </div>
          </div>
        </div>
      </section>

      <!-- 商品详情展示页 -->
      <div class="productDetial">
        <aside class="aside">
          <div class="tabTitle">
            <h4 class="active">相关分类</h4>
            <h4>推荐品牌</h4>
          </div>
          <div class="tabContent">
            <div class="tab-pane active">
              <ul class="partList">
                <li><a href="javascript:;"> 手机</a></li>
                <li><a href="javascript:;">手机壳</a></li>
                <li><a href="javascript:;">内存卡</a></li>
                <li><a href="javascript:;">Iphone配件</a></li>
                <li><a href="javascript:;">贴膜</a></li>
                <li><a href="javascript:;">手机耳机</a></li>
                <li><a href="javascript:;">移动电源</a></li>
                <li><a href="javascript:;">平板电脑</a></li>
              </ul>
              <ul class="goodList">
                <li>
                  <div class="detailImg"><img src="./images/part01.png" alt="" /></div>
                  <h4>Apple苹果iPhone 6s (A1699)</h4>
                  <p>¥6088.00</p>
                  <div class="addCart"><a href="">加入购物车</a></div>
                </li>
                <li>
                  <div class="detailImg"><img src="./images/part01.png" alt="" /></div>
                  <h4>Apple苹果iPhone 6s (A1699)</h4>
                  <p>¥6088.00</p>
                  <div class="addCart"><a href="">加入购物车</a></div>
                </li>
                <li>
                  <div class="detailImg"><img src="./images/part01.png" alt="" /></div>
                  <h4>Apple苹果iPhone 6s (A1699)</h4>
                  <p>¥6088.00</p>
                  <div class="addCart"><a href="">加入购物车</a></div>
                </li>
                <li>
                  <div class="detailImg"><img src="./images/part01.png" alt="" /></div>
                  <h4>Apple苹果iPhone 6s (A1699)</h4>
                  <p>¥6088.00</p>
                  <div class="addCart"><a href="">加入购物车</a></div>
                </li>
              </ul>
            </div>
            <div class="tab-pane">推荐品牌</div>
          </div>
        </aside>
        <div class="detail">
          <div class="fitting">
            <h4 class="kt">选择搭配</h4>
            <div class="good-suits">
              <div class="master">
                <img src="./images/l-m01.png" alt="" />
                <p>¥5299</p>
                <i>+</i>
              </div>
              <ul class="suits">
                <li class="suitsItem">
                  <img src="./images/dp01.png" alt="" />
                  <p>Feless费勒斯VR</p>
                  <label>
                    <input type="checkbox" value="39" />
                    <span>39</span>
                  </label>
                </li>
                <li class="suitsItem">
                  <img src="./images/dp02.png" alt="" />
                  <p>Feless费勒斯VR</p>
                  <label>
                    <input type="checkbox" value="50" />
                    <span>50</span>
                  </label>
                </li>
                <li class="suitsItem">
                  <img src="./images/dp03.png" alt="" />
                  <p>Feless费勒斯VR</p>
                  <label>
                    <input type="checkbox" value="59" />
                    <span>59</span>
                  </label>
                </li>
                <li class="suitsItem">
                  <img src="./images/dp04.png" alt="" />
                  <p>Feless费勒斯VR</p>
                  <label>
                    <input type="checkbox" value="99" />
                    <span>99</span>
                  </label>
                </li>
              </ul>
              <div class="result">
                <div class="num">已选购0件商品</div>
                <p class="price-tit">套餐价</p>
                <p class="price">¥5299</p>
                <button class="addShopcar">加入购物车</button>
              </div>
            </div>
          </div>
          <div class="intro">
            <ul class="tab-wraped">
              <li class="active">
                <a href="###">商品介绍</a>
              </li>
              <li class="">
                <a href="###">规格与包装</a>
              </li>
              <li class="">
                <a href="###">售后保障</a>
              </li>
              <li class="">
                <a href="###">商品评价</a>
              </li>
              <li class="">
                <a href="###">手机社区</a>
              </li>
            </ul>
            <div class="tab-content">
              <div id="one" class="tab-pane active">
                <ul class="goods-intro">
                  <li>分辨率：1920*1080(FHD)</li>
                  <li>后置摄像头：1200万像素</li>
                  <li>前置摄像头：500万像素</li>
                  <li>核 数：其他</li>
                  <li>频 率：以官网信息为准</li>
                  <li>品牌： Apple</li>
                  <li>商品名称：APPLEiPhone 6s Plus</li>
                  <li>商品编号：1861098</li>
                  <li>商品产地：中国大陆</li>
                  <li>商品毛重：0.51kg</li>
                  <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                  <li>系统：苹果（IOS）</li>
                  <li>像素：1000-1600万品毛重：0.51kg</li>
                  <li>机身内存：64GB</li>
                </ul>
                <div class="intro-detail">
                  <img src="./images/intro01.png" alt="" />
                  <img src="./images/intro02.png" alt="" />
                  <img src="./images/intro03.png" alt="" />
                </div>
              </div>
              <div id="two" class="tab-pane">规格与包装</div>
              <div id="three" class="tab-pane">售后保障</div>
              <div id="four" class="tab-pane">商品评价</div>
              <div id="five" class="tab-pane">手机社区</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="./js/data.js"></script>
    <script>
      var smallArea = document.querySelector(".previewArea .preview .smallArea");
      var mask = document.querySelector(".previewArea .preview .smallArea .mask");
      var bigArea = document.querySelector(".previewArea .preview .bigArea");
      var bigImg = document.querySelector(".previewArea .preview .bigArea img");

      // 1.蒙版移动
      function OSmallArea() {
        smallArea.onmousemove = function (event) {
          mask.style.display = "block";
          var smallAreaXY = {
            x: smallArea.getBoundingClientRect().x,
            y: smallArea.getBoundingClientRect().y,
          };

          var MoveDis = {
            x: event.clientX - mask.offsetWidth / 2 - smallAreaXY.x,
            y: event.clientY - mask.offsetHeight / 2 - smallAreaXY.y,
          };

          var maxMove = {
            x: smallArea.clientWidth - mask.offsetWidth,
            y: smallArea.clientHeight - mask.offsetHeight,
          };

          if (MoveDis.x >= maxMove.x) {
            MoveDis.x = maxMove.x;
          } else if (MoveDis.x <= 0) {
            MoveDis.x = 0;
          }

          if (MoveDis.y >= maxMove.y) {
            MoveDis.y = maxMove.y;
          } else if (MoveDis.y <= 0) {
            MoveDis.y = 0;
          }

          mask.style.left = MoveDis.x + "px";
          mask.style.top = MoveDis.y + "px";

          bigArea.style.display = "block";
          var bigImgCanMove = bigArea.clientWidth - bigImg.offsetWidth;
          var scale = bigImgCanMove / maxMove.x;
          var bigImgMove = {
            x: scale * MoveDis.x,
            y: scale * MoveDis.y,
          };

          bigImg.style.left = bigImgMove.x + "px";
          bigImg.style.top = bigImgMove.y + "px";
        };

        smallArea.onmouseleave = function () {
          mask.style.display = "none";
          bigArea.style.display = "none";
        };
      }

      OSmallArea();

      // 2.略缩图
      function Thumbanil() {
        var ul = document.querySelector(".previewArea .prescroll .listOut .list");
        var imgList = goodData.imgsrc;
        imgList.forEach((item, index) => {
          var li = document.createElement("li");
          var img = new Image();
          img.src = item.s;
          li.append(img);
          ul.append(li);
        });

        var img_list = document.querySelectorAll(".previewArea .prescroll .listOut .list li img");
        var smallImg = document.querySelector(".previewArea .preview .smallArea img");

        img_list.forEach((item, index) => {
          item.onmouseenter = function () {
            this.style.border = "1px solid red";
            smallImg.src = item.src;

            bigImg.src = imgList[index].b;
          };

          item.onmouseleave = function () {
            this.style.border = "";
          };

          var left = document.querySelector(".previewArea .prescroll .left");
          var right = document.querySelector(".previewArea .prescroll .right");
          var li_list = document.querySelectorAll(".previewArea .prescroll .listOut .list li");
          var everyWidth = li_list[0].offsetWidth;
          var step = everyWidth * 2;
          var locationX = 0;
          var maxCanMove = (li_list.length - 5) * everyWidth;

          left.onclick = function () {
            if (locationX >= step) {
              locationX -= step;
            } else {
              locationX = 0;
            }
            ul.style.transform = "translateX(-" + locationX + "px)";
          };

          right.onclick = function () {
            if (locationX >= maxCanMove) {
              locationX = maxCanMove;
            } else {
              locationX += step;
            }
            ul.style.transform = "translateX(-" + locationX + "px)";
          };
        });
      }

      Thumbanil();

      // 3.加载资源
      function onLoad() {
        var priceArea = document.querySelector(".detailArea .priceArea");
        var goodsDetail = goodData.goodsDetail;

        var str =
          '<h3 class="title">' +
          goodsDetail.title +
          '</h3>\
              <p class="con1">' +
          goodsDetail.recommend +
          '</p>\
              <div class="price">\
                <div class="priceDetail">\
                  <p>价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</p>\
                  <p>￥ <span>' +
          goodsDetail.price +
          '</span> 元</p>\
                </div>\
                <div class="buy">\
                  <p>促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</p>\
                  <p><span>' +
          goodsDetail.promoteSales.type +
          "</span>" +
          goodsDetail.promoteSales.content +
          '</p>\
                </div>\
              </div>\
              <div class="support">\
                <div class="supportDetail">\
                  <p>支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</p>\
                  <p>' +
          goodsDetail.support +
          '</p>\
                </div>\
                <div class="address">\
                  <p>配&nbsp;送&nbsp;至</p>\
                  <p>' +
          goodsDetail.address +
          "</p>\
                </div>\
              </div>";

        priceArea.innerHTML = str;

        var chooseArea = document.querySelector(".detailArea .chooseArea");
        var crumbData = goodData.goodsDetail.crumbData;

        crumbData.forEach((item, index) => {
          var dl = document.createElement("dl");
          var dt = document.createElement("dt");
          dt.innerHTML = item.title;
          dl.append(dt);

          var dataList = item.data;
          dataList.forEach((item) => {
            var dd = document.createElement("dd");
            dd.innerHTML = item.type;
            dd.dataset.price = item.changePrice;
            dl.append(dd);
          });

          chooseArea.append(dl);
        });
      }

      onLoad();

      // 4.添加商品
      function Choose() {
        var chooseInsert = document.querySelector(".detailArea .chooseInsert");
        var dlList = document.querySelectorAll(".detailArea .chooseArea dl");
        var arr = new Array(4);
        arr.fill = null;
        dlList.forEach((item, index) => {
          ddList = item.querySelectorAll("dd");
          ddList.forEach((item) => {
            item.onclick = function () {
              var DList = dlList[index].querySelectorAll("dd");
              DList.forEach((item) => (item.style.color = "#666"));
              item.style.color = "red";

              arr[index] = item;

              chooseInsert.innerHTML = null;
              arr.forEach((item, index) => {
                if (item) {
                  var mark = document.createElement("mark");
                  mark.innerHTML = item.innerHTML;
                  var a = document.createElement("a");
                  a.innerHTML = "X";
                  a.dataset.index = index;
                  mark.append(a);
                  chooseInsert.append(mark);
                }
              });

              var delA = document.querySelectorAll(".detailArea .chooseInsert mark a");
              delA.forEach((item, index) => {
                item.onclick = function () {

                  this.parentElement.remove();
                  arr[this.dataset.index] = null;

                  dd_list = dlList[this.dataset.index].querySelectorAll("dd");
                  dd_list.forEach(item => item.style.color = '#666');
                  dd_list[0].style.color = 'red';

                  TottolePrice(arr);
                };
              });
              TottolePrice(arr);
            };
          });
        });
      }

      Choose();

      // 5.全部金额
      function TottolePrice(arr) {
        var basePrice = goodData.goodsDetail.price;
        var beginSpan = document.querySelector(".detailArea .price .priceDetail p:nth-child(2) span");
        var inputText = document.querySelector(".detailArea .goodsNum .num input");
        var n = inputText.value;

        arr.forEach((item) => {
          if (item) {
            basePrice += +item.dataset.price;
          }
        });
        beginSpan.innerHTML = basePrice * n;
      }

      // 6.计算数量变化影响下的金额
      function Compute() {
        var inputText = document.querySelector(".detailArea .goodsNum .num input");
        var n = inputText.value;
        var baseSpan = document.querySelector(".detailArea .price .priceDetail p:nth-child(2) span");
        var plus = document.querySelector(".detailArea .goodsNum .num .plus");
        var mins = document.querySelector(".detailArea .goodsNum .num .mins");

        plus.onclick = function () {
          console.log(111);
          var basePrice = baseSpan.innerHTML;
          n++;
          var totalPrice = (basePrice / (n - 1)) * n;
          baseSpan.innerHTML = totalPrice;
          inputText.value = n;
        };

        mins.onclick = function () {
          if (n > 1) {
            var basePrice = baseSpan.innerHTML;
            n--;
            var totalPrice = (basePrice / (n + 1)) * n;
            baseSpan.innerHTML = totalPrice;
            inputText.value = n;
          }
        };
      }

      Compute();
    </script>
  </body>
</html>
